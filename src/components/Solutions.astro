---
import { getCollection } from "astro:content";
import { Icon } from "astro-icon/components";

const solutions = await getCollection("solutions");
---

<section id="soluciones" class="py-16 md:py-28 border-t border-gray-200">
  <div class="container mx-auto px-4">
    <h2
      class="text-4xl md:text-5xl font-bold text-center text-impletech-blue mb-16 animate-fade-in"
    >
      Soluciones de Seguridad SÃ³lidas y Fiables
    </h2>
    <!-- Swiper -->
    <div class="swiper solutions-swiper-container animate-fade-in">
      <div class="swiper-wrapper pb-16">
        {
          solutions.map((solution) => (
            <div class="swiper-slide h-auto">
              <div class="flex flex-col items-center text-center h-full">
                <div set:html={solution.data.icon} />
                <h3 class="text-2xl font-semibold text-impletech-dark-text mb-3">
                  {solution.data.title}
                </h3>
                <p class="text-impletech-muted-text-light text-lg leading-relaxed">
                  {solution.body}
                </p>
              </div>
            </div>
          ))
        }
      </div>
      <!-- Add Pagination -->
      <div class="swiper-pagination"></div>

      <!-- Add Navigation -->
      <div class="swiper-button-next text-impletech-blue"></div>
      <div class="swiper-button-prev text-impletech-blue"></div>
    </div>
  </div>
</section>

<style is:global>
  .solutions-swiper-container {
    width: 100%;
    height: 100%;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .swiper-slide {
    text-align: center;
    font-size: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .swiper-pagination-bullet {
    background-color: #d1d5db; /* gray-300 */
    opacity: 1;
  }

  .swiper-pagination-bullet-active {
    background-color: var(--color-impletech-green) !important;
  }

  .swiper-button-next,
  .swiper-button-prev {
    color: var(--color-impletech-blue) !important;
    --swiper-navigation-size: 2rem; /* Adjust size */
    top: 50%;
    transform: translateY(-50%);
    margin-top: 0;
  }

  .swiper-button-prev {
    left: -3rem; /* Adjust as needed to move it further left */
  }

  .swiper-button-next {
    right: -3rem; /* Adjust as needed to move it further right */
  }

  .swiper-button-next:after,
  .swiper-button-prev:after {
    font-weight: bold;
  }
</style>

<script>
  // @ts-ignore
  import Swiper from "swiper/bundle";
  import "swiper/css/bundle";

  document.addEventListener("DOMContentLoaded", function () {
    const swiper = new Swiper(".solutions-swiper-container", {
      // Optional parameters
      loop: true,
      autoplay: {
        delay: 2000,
        disableOnInteraction: false,
      },
      slidesPerView: 1,
      spaceBetween: 30,
      breakpoints: {
        // when window width is >= 768px
        768: {
          slidesPerView: 2,
          spaceBetween: 30,
        },
        // when window width is >= 1024px
        1024: {
          slidesPerView: 3,
          spaceBetween: 40,
        },
      },

      // If we need pagination
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },

      // Navigation arrows
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
    });
  });
</script>
